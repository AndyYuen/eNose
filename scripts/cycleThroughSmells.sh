#! /bin/bash

# Cycle through all the different smells in the enose-app UI by sending MQTT messages, 
# for testing purposes.

if [ $#  -lt 2  ]; then
	echo "Usage: $0 mqttServerIP mqttServerPort"
	exit 1
fi

MQTT_SERVER_IP=$1
MQTT_SERVER_PORT=$2


while true
do
read -p "Press enter to switch to the next smell: AIR" 

# air
for i in {1..8}
do
mosquitto_pub -h $MQTT_SERVER_IP -p $MQTT_SERVER_PORT  -u admin -P admin -t sensorData -m '{ "datapoints" : [
[ 0, 2872500, 28.481461, 1016.189331, 34.355286, 120754.718750 ],
[ 1, 2872556, 28.519949, 1016.367737, 34.086811, 111014.742188 ],
[ 2, 2872611, 28.928432, 1016.165283, 33.778114, 89136.492188 ],
[ 3, 2872666, 29.008438, 1016.132935, 33.619545, 104810.648438 ],
[ 4, 2872721, 29.531378, 1016.589172, 33.954559, 85819.648438 ],
[ 5, 2872776, 29.525793, 1016.524658, 33.448845, 101688.179688 ],
[ 6, 2872831, 29.242722, 1016.568665, 33.781593, 54202.835938 ],
[ 7, 2872887, 29.382229, 1016.511841, 33.217091, 84965.148438 ]
] }'
sleep 1
done
read -p "Press enter to switch to the next smell: ALCOHOL"

# alcohol
for i in {1..8}
do
 mosquitto_pub -h $MQTT_SERVER_IP -p $MQTT_SERVER_PORT  -u admin -P admin -t sensorData -m  '{ "datapoints" : [
[ 0, 352076, 29.153528, 1013.758362, 42.859341, 15988.008789 ],
[ 1, 352132, 29.054052, 1013.886719, 42.731602, 18244.013672 ],
[ 2, 352187, 29.364765, 1013.659302, 42.643242, 16714.546875 ],
[ 3, 352242, 29.313501, 1013.637085, 42.663033, 17684.443359 ],
[ 4, 352297, 29.057825, 1014.191528, 43.682262, 16231.295898 ],
[ 5, 352352, 29.020269, 1014.063416, 43.700302, 18433.179688 ],
[ 6, 352407, 28.423435, 1014.139526, 45.566723, 8376.962891 ],
[ 7, 352463, 28.585430, 1014.143555, 44.831139, 14143.646484 ]
] }'
sleep 1
done
read -p "Press enter to switch to the next smell: COFFEE"

# coffee
for i in {1..8}
do
 mosquitto_pub -h $MQTT_SERVER_IP -p $MQTT_SERVER_PORT  -u admin -P admin -t sensorData -m  '{ "datapoints" : [
[ 0, 6223500, 26.961920, 1015.531799, 20.406965, 40777.316406 ],
[ 1, 6223556, 27.074890, 1015.667297, 20.061396, 39900.250000 ],
[ 2, 6223611, 27.316040, 1015.511292, 20.056707, 29997.656250 ],
[ 3, 6223666, 27.470654, 1015.491943, 19.714186, 34343.976562 ],
[ 4, 6223721, 27.560328, 1015.805908, 19.096218, 31227.128906 ],
[ 5, 6223776, 27.356068, 1015.777039, 19.544619, 32462.591797 ],
[ 6, 6223831, 26.956295, 1015.824036, 19.826588, 15256.257812 ],
[ 7, 6223887, 26.949524, 1015.706543, 19.609285, 27432.490234 ]
] }'
sleep 1
done

done
